<div class="dialog-med">

<div class="panel-header">
    <h2>Custom Analyzer</h2>
</div>

<div class="panel-content">
    <div ng-show="errorMessage"
         class="error error-form ng-cloak"
         role="alert"> {{errorMessage}}
    </div>

    <form role="form" class="forms">
        <div class="formrow">
            <label>Name</label>
            <input ng-disabled="viewOnlyModal"
                   ng-model="name"
                   type="text"
                   id="tname"
                   autofocus>
        </div>

        <div class="formrow">
            <label>Character Filters</label>
            <ul class="list-text"
                ng-show="analyzer.char_filters.length > 0"
                ng-sortable
                ng-model="analyzer.char_filters">
                <li ng-repeat="analyzerCharFilter in analyzer.char_filters track by $index">
                    <div class="row">
                        {{ analyzerCharFilter }}
                        <a ng-if="!viewOnlyModal"
                           href=""
                           ng-click="removeCharFilter($index)">
                            remove
                        </a>
                    </div>
                </li>
            </ul>
            <div ng-if="!viewOnlyModal" class="row input-append">
                <select ng-change="addCharFilterChanged()"
                        ng-model="addCharacterFilterName"
                        id="addCharacterFilters">
                    <option ng-repeat="charFilter in charFilterNames">{{charFilter}}</option>
                </select>
                <button ng-click="addCharFilter(this)" type="button" class="outline">+ Add</button>
            </div>
        </div>

        <div class="formrow">
            <label>Tokenizer</label>
            <select ng-disabled="viewOnlyModal"
                    ng-change="tokenizerChanged()"
                    ng-model="analyzer.tokenizer"
                    id="analyzerTokenizer">
                <option ng-repeat="tokenizer in tokenizerNames">{{tokenizer}}</option>
            </select>
        </div>

        <div class="formrow">
            <label>Token Filters</label>
            <ul class="list-text"
                ng-show="analyzer.token_filters.length > 0"
                ng-sortable
                ng-model="analyzer.token_filters">
                <li ng-repeat="analyzerTokenFilter in analyzer.token_filters">
                    <div class="row">
                        {{ analyzerTokenFilter }}
                        <a ng-if="!viewOnlyModal"
                           href=""
                           ng-click="removeTokenFilter($index)">
                            remove
                        </a>
                    </div>
                </li>
            </ul>
            <div ng-if="!viewOnlyModal" class="row input-append">
                <select ng-change="addTokenFilterChanged()"
                        ng-model="addTokenFilterName"
                        id="addTokenFilters">
                    <option ng-repeat="tokenFilter in tokenFilterNames">{{tokenFilter}}</option>
                </select>
                <button ng-click="addTokenFilter(this)" type="button" class="outline">+ Add</button>
            </div>
        </div>

    </form>
</div>

<div class="panel-footer">
    <a ng-if="viewOnlyModal"
       href=""
       ng-click="cancel()">Cancel</a>
    <a ng-if="!viewOnlyModal"
       href=""
       ng-click="cancel()">Cancel</a>
    <button ng-if="!viewOnlyModal"
            ng-click="build(name)"
            type="button">
        Save
    </button>
</div>

</div>
